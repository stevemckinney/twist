// Faded backgrounds with a shadow
// ---------------------------
@mixin gradient-background($main-bg: $tertiary, $content-bg: true, $content-height: 600px, $shadow: 0 0 3px rgba(scale-lightness($tertiary, -40%), .6), $shadow2: false, $shadow3: false, $shadow4: false, $context: $base-font-size) {

	$shadow: compact($shadow, $shadow2, $shadow3, $shadow4);
	
	@if $content-bg and $main-bg {
		$content-bg: scale-color($main-bg, $lightness: 20%, $saturation: -20%);
		@include background(linear-gradient(top, rgba($content-bg, 1) 20%, rgba($content-bg, 0) 100%)); }
	
	background-size: 100% em($content-height, $context);
	background-repeat: no-repeat;
	position: relative;
	z-index: 1;
	
	&:before, &:after {
		content: "";
		position: absolute;
		display: block; }
	&:before {
		z-index: -1;
		left: -3px;
		right: -3px;
		top: 0;
		height: em($content-height, $context);
		@if $main-bg {
			@include background(linear-gradient(top, rgba($main-bg, 0) 0%, rgba($main-bg, 1) 100%)); } }
	&:after {
		z-index:-2;
		top: 0;
		right: 0;
		left: 0;
		height: em($content-height, $context) - 1.5em;
		box-shadow: $shadow; } }

// Triangles
// ---------------------------
%triangle-base {
	@include wh(0);
	display: block;
	position: absolute; }
	
@mixin triangle($direction: left, $size: 48px, $color: inherit) {
	
	$size: em($size) / 2;
	$negative-size: -$size;
	
	@extend %triangle-base;
	
	@if $direction == top {
		border: {
			right: $size solid transparent;
			bottom: $size solid $color;
			left: $size solid transparent; }
		bottom: 100%;
		left: 50%;
		margin-left: $negative-size; }
	@else if $direction == right {
		border: {
			top: $size solid transparent;
			bottom: $size solid transparent;
			left: $size solid $color; }
		left: 100%;
		top: 50%;
		margin-top: $negative-size; }
	@else if $direction == bottom {
		border: {
			top: $size solid $color;
			right: $size solid transparent;
			left: $size solid transparent; }
		top: 100%;
		left: 50%;
		margin-left: $negative-size; }
	@else if $direction == left {
		border: {
			top: $size solid transparent;
			right: $size solid $color;
			bottom: $size solid transparent; }
		right: 100%;
		top: 50%;
		margin-top: $negative-size; } }