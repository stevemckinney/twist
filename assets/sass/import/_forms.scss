// 	----------------------------------------- 
//	Base form styles
// 	-----------------------------------------
%form-base {
	border: none;
	font-family: $form;
	outline: none;
	max-width: 100%;
	color: $primary; }
%form-block {
	display: block;
	width: 100%; }

@mixin form-label($position: top, $main-color: inherit, $font-weight: 700, $font-size: $base-font-size, $font-family: $sans) {
	
	$position: unquote($position);
	
	line-height: $base-line-height;
	font: $font-weight #{$font-size}/#{$base-line-height} #{$font-family};
	color: $main-color;
	
	@if $position != left {
		@extend %form-block;
		margin: 0 0 .375em;
		& + input, & + select, & + textarea {
			@extend %form-block; } }
	@else {
		width: 100%;
		display: inline-block;
		@include respond-min($b) {
			width: 33.333333333%;
			margin-left: -4px; }
		& + input, & + select, & + textarea, & + ul {
			width: 100%;
			display: inline-block;
			@include respond-min($b) {
				width: 66.666666667%; } }
		.check &, ul & {
			width: 100%; } } }

/* # To do
 * - form label position?
 * - input type?
 * - status: error, success, disabled
 */
@mixin form(
	$main-color: #aeaeae,
	$focus-color: $alt,
	$radius: $radius, 
	$shadow: true, 
	$style: true, 
	$size: true,
	$set-height: true, 
	$hover: false, 
	$type: "input") {
	
	$type: unquote($type);
	$form-light: scale-color($main-color, $saturation: 20%, $lightness: 30%);
		
	// styles which remain consistent no matter the input
	@extend %form-base;
	@if $radius {
		@include border-radius($radius); }
	
	// if we want styles to be applied
	@if $style {
		
		// checkbox/radio only need a margin really
		// ---------------------------
		@if $type == checkbox or $type == radio {
			margin: 0 em($base-px/2, $base-font-size) 0 0; }
		
		// select elements
		// ---------------------------
		@else if $type == select {
			@extend %input-reset;
			@include background(linear-gradient(darken($white, 2%) 46%, darken($white, 5%) 54%), $white);
			@include box-shadow(
				inset 0 0 0 1px $main-color,
				0 1px 1px rgba($white, .6));
			.no-boxshadow & {
				border: 1px solid $main-color; }
			&:focus {
				@include box-shadow(
					inset 0 0 0 1px scale-color($focus-color, $lightness: -20%),
					inset 6px 0 12px -6px rgba($focus-color, .3),
					inset -6px 0 12px -6px rgba($focus-color, .3),
					0 0 6px rgba($focus-color, .6),
					0 1px 1px rgba($white, .6)); }
			&:before {
				content: "\25BE";
				color: inherit;
				position: absolute;
				top: em($base-px, $base-font-size); 
				right: em($base-px, $base-font-size); } }
		
		// general inputs
		// ---------------------------
		@else if $type == input or $type == textarea {
			@extend %input-reset;
			@include background(linear-gradient(scale-color($white, $lightness: -5%), $white), $white);
			@include box-shadow(
				inset 0 0 0 1px $main-color,
				inset 0 2px 2px rgba($main-color, .4),
				0 1px 1px rgba($white, .6));
			.no-boxshadow & {
				border: 1px solid $main-color; }
			&:focus {
				// @include background(linear-gradient(scale-color($white, $lightness: -2.5%), $white), $white);
				@include box-shadow(
					inset 0 0 0 1px scale-color($focus-color, $lightness: -20%),
					inset 0 2px 2px rgba($main-color, .4),
					inset 6px 0 12px -6px rgba($focus-color, .3),
					inset -6px 0 12px -6px rgba($focus-color, .3),
					0 0 6px rgba($focus-color, .6),
					0 1px 1px rgba($white, .6)); }
			.no-cssgradients & {
				background: $white; } }
				
		// submit buttons use the element mixin
		// ---------------------------
		@else {
			@include element($main-color, $style: true, $size: 3, $hover: true); } }
	
	@if $type == select or $type == input {
		@if $set-height {
			padding: em(3px, $base-font-size) em($base-px, $base-font-size);
			height: em(42px, $base-font-size); }
		@else {
			padding: em($base-px/1.5, $base-font-size) em($base-px, $base-font-size); } }
	@if $type == textarea {
		@if $set-height {
			padding: em($base-px, $base-font-size) em($base-px, $base-font-size); }
		@else {
			padding: em($base-px, $base-font-size) em($base-px, $base-font-size); } }
}