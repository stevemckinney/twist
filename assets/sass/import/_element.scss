//	Element â€” A base, mixin and options
//	Style anything consistently
//	Works well for anything else you'd like to style similar apart from buttons/forms
//	-----------------------------------------
@mixin element(
	$main-color: $alt,
	$text-color: $white,
	$radius: $radius, 
	$subtle: false,
	$subtle-color: $default-subtle-color,
	$shadow: true,
	$style: true,
	$size: 2, 
	$hover: false,
	$font-size: false,
	$display: inline-block) {
	
	@extend %element-base;		
	display: $display;
	
	@if $size != false { padding: element-size($size); }
	@if $font-size { font-size: $font-size; }
	@if $subtle != true { color: $text-color; }
	@else { color: $subtle-color; }
	@if $radius { @include border-radius($radius); }
	
	@if $style {
		// subtle start
		@if $subtle {
			@include box-shadow(inset 0 0 0 1px rgba($subtle-color, 0));
			.no-boxshadow & {
				border: 1px solid transparent; } } // close $subtle true
		
		// non subtle start		
		@else {
			@if $shadow {
				@include element-shading($main-color, normal); }
			@else {
				background: $main-color; } } // close else
				
		@if $hover {
			&:hover:not(:disabled), &:focus:not(:disabled) {
				@if $subtle { 
					color: $text-color; }
				@if $shadow {
					@include element-shading($main-color, hover); }
				@else {
					background: scale-lightness($main-color, 10%); } }
					
			&:active:not(:disabled) {
				@if $shadow {
					@include element-shading($main-color, active); }
				@else {
					background: scale-lightness($main-color, -10%); } } } } // close $style
}

// consistent stuff for each button
// ---------------------------
%element-base {
	@include background-clip;
	@include transition(none);
	@include appearance(none);
	@include user-select(none);
	position: relative;
	font-family: $element;
	line-height: 1; }

@function element-size($size: 1, $ratio: .375 - .0625) {
  @return ($size * $ratio) + em (($size * 2) * $ratio) + em;
}


@mixin element-base(
	$size: 3,
	$font-size: false,
	$text-color: $white,
	$subtle: false,
	$radius: $radius,
	$display: inline-block) {
	@extend %element-base;
	@if $size != false {
		padding: element-size($size); }
	@if $font-size {	
		font-size: $font-size; }
	@if $subtle != true {
		color: $text-color; }
	@else {
		color: $subtle-color; }
	@if $radius {
		@include border-radius($radius); }
	display: $display; }
	
// separate the bulk of the styling into a mixin for ease of editing
// $main-color is overridden by the element mixin below
// this can also be used separately to apply style
// combine with element-base to have more control of the
// distribution of your css to make buttons.
// has modernizr classes for features that don't exist
// - border is set due to it being done with the box-shadow
// - could use simple background fallback for gradient,
//   though this keeps web inspector that bit cleaner
// ---------------------------
@mixin element-shading(
	$main-color: $alt,
	$state: normal) {
	
	@if $state == hover { 
		$main-color: scale-lightness($main-color, 10%); }
	@else if $state == active { 
		$main-color: scale-lightness($main-color, if-bright($main-color, -10%, -5%)); }
	
	$light-color: scale-lightness($main-color, if-bright($main-color, 25%, 15%));
	$dark-color: scale-lightness($main-color, if-bright($main-color, -15%, -25%));
	
	@if red($main-color) > green($main-color) and 
			green($main-color) > blue($main-color) and
			green($main-color) > 90 { 
				$dark-color: scale-lightness(
					adjust-hue($main-color, -12deg), 
					if-bright($main-color, -5%, -15%)); }
	@if blue($main-color) > green($main-color) and blue($main-color) > red($main-color) or
			green($main-color) > red($main-color) and 
			green($main-color) > blue($main-color) { 
				$dark-color: scale-lightness(
					adjust-hue($main-color, 12deg), 
					if-bright($main-color, -5%, -15%)); }
	
	$shadow-color: scale-lightness($main-color, if-bright($main-color, -50%, -65%));
	
	$highlight: inset 0 2px 0 rgba($light-color, .8);
	@if $state == active {
		$highlight: inset 0 1px 3px rgba($shadow-color, .6); }
	
	@include background(linear-gradient($main-color, $dark-color));
	text-shadow: 0 1px 1px rgba($shadow-color, .6);
	
	@include box-shadow(
		inset 0 0 0 1px rgba($shadow-color, .3),
		$highlight,
		inset 12px 0 18px -12px rgba($dark-color, .4),
		inset -12px 0 18px -12px rgba($dark-color, .4),
		0 1px 3px rgba($shadow-color, .3));
		
	// modernizr stuff
	.no-boxshadow & {
		border: 1px solid $dark-color; }
	.no-cssgradients & {
		background: $main-color; } }