@import "variables";

// $attribute-states: disabled, readonly;
// $shaded-states: normal, focus, error, success;

// Shading for text
// Called in _type.scss
// ---------------------------
@mixin form-shading-text(
  $color            : $default-form-color,
  $background-color : $default-form-background-color,
  $state            : $default-form-state,
  $shading          : $default-form-shading
) {  
  // If 2 colours are passed make a gradient, otherwise a solid colour
  $background: 
    if( length($background-color) > 1, 
      linear-gradient(to top, nth($background-color, 1) 0%, nth($background-color, 2) 100%),
      $background-color
  );
  background: $background;
  
  @if $shading {
    box-shadow:
      inset 0 1px scale-lightness($color, -20%),
      inset 0 0 0 1px $color,
      
      // Use the regular colour, but desaturate the colour on focus
      if($state != focus, inset 0 1px 2px $color, inset 0 1px 2px desaturate($color, 20%)),
      
      // Make it clearer that the field is focused
      if($state == focus, 0 0 6px -2px $color, compact(false)); }
  @else {
    box-shadow:
      inset 0 1px scale-lightness($color, -20%),
      inset 0 0 0 1px $color; } }

// Shading for select
// Called in _type.scss
// ---------------------------
@mixin form-shading-select(
  $color            : $default-form-color,
  $background-color : $default-form-background-color,
  $state            : $default-form-state,
  $shading          : $default-form-shading
) {  
  // If 2 colours are passed make a gradient, otherwise a solid colour
  $background: 
    if(length($background-color) > 1, compact($default-form-select-image, linear-gradient(to bottom, nth($background-color, 1) 0%, nth($background-color, 2))), $default-form-select-image $background-color );
  background: $background;
  
  @if $shading {        
    box-shadow:
      inset 0 -1px scale-lightness($color, -20%),
      inset 0 -1px 2px $color,
      inset 0 1px rgba($white, .2),
      inset 0 0 0 1px $color,
      if($state == focus, 0 0 6px -2px $color, compact(false)); }
  @else {
    box-shadow:
      inset 0 -1px scale-lightness($color, -10%),
      inset 0 0 0 1px $color; } }

// Shading for radio
// Called in _type.scss
// ---------------------------
@mixin form-shading-checkbox(
  $color            : $default-form-color,
  $background-color : $default-form-background-color,
  $shading          : $default-form-shading
) {
  // If 2 colours are passed make a gradient, otherwise a solid colour
  $background: 
    if(length($background-color) > 1, linear-gradient(nth($background-color, 1) 0%,
      nth($background-color, 2) 60%), $background-color );
  background: $background;
  
  box-shadow: 
    inset 0 -1px scale-lightness($color, -20%),
    inset 0 0 0 1px $color,
    if($shading, inset 0 2px 1px $white, compact(false));
  
  &:checked {
    @if length($background-color) > 1 {
      background: $default-form-checkbox-image $background-gradient; }
    @else {
      background: $default-form-checkbox-image $background; } } }

// Shading for radio
// Called in _type.scss
// ---------------------------
@mixin form-shading-radio(
  $color            : $default-form-color,
  $background-color : $default-form-background-color,
  $shading          : $default-form-shading,
  $checked-color    : $default-form-checked-color
) {
  // If 2 colours are passed make a gradient, otherwise a solid colour
  $background: 
    if(length($background-color) > 1, linear-gradient(nth($background-color, 1) 0%,
      nth($background-color, 2) 60%), $background-color );
  background: $background;

  box-shadow:
    inset 0 1px scale-lightness($color, -20%),
    inset 0 0 0 1px $color,
    if($shading, inset 0 2px 1px $white, compact(false));

  &:checked {
    background:
      radial-gradient($checked-color $default-form-radio-radial-gradient-color-stop,
        $background-color $default-form-radio-radial-gradient-color-stop),
      $background; } }